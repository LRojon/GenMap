/**
 * Palette de 256 couleurs pour la génération de cartes
 * Convertie depuis la version Python du projet GenMap
 */

export const COLOR_PALETTE = [
  [2, 43, 68], [2, 43, 68], [2, 43, 68], [2, 43, 69], [2, 44, 69],
  [2, 44, 69], [2, 44, 70], [2, 45, 70], [2, 45, 71], [2, 45, 71],
  [3, 45, 71], [3, 46, 72], [3, 46, 72], [3, 46, 72], [3, 47, 73],
  [3, 47, 73], [3, 47, 74], [3, 48, 74], [3, 48, 74], [4, 48, 75],
  [4, 48, 75], [4, 49, 75], [4, 49, 76], [4, 49, 76], [4, 50, 77],
  [4, 50, 77], [4, 50, 77], [4, 51, 78], [5, 51, 78], [5, 51, 78],
  [5, 51, 79], [5, 52, 79], [5, 52, 80], [5, 52, 80], [5, 53, 80],
  [5, 53, 81], [5, 53, 81], [6, 54, 81], [6, 54, 82], [6, 54, 82],
  [6, 54, 83], [6, 55, 83], [6, 55, 83], [6, 55, 84], [6, 56, 84],
  [6, 56, 84], [7, 56, 85], [7, 56, 85], [7, 57, 86], [7, 57, 86],
  [7, 57, 86], [7, 58, 87], [7, 58, 87], [7, 58, 87], [7, 59, 88],
  [8, 59, 88], [8, 59, 89], [8, 59, 89], [8, 60, 89], [8, 60, 90],
  [8, 60, 90], [8, 61, 90], [8, 61, 91], [8, 61, 91], [9, 62, 92],
  [9, 62, 92], [9, 62, 92], [9, 63, 93], [9, 63, 93], [9, 63, 93],
  [9, 63, 93], [9, 64, 94], [10, 64, 94], [10, 64, 94], [10, 65, 95],
  [10, 65, 95], [10, 65, 95], [10, 66, 96], [10, 66, 96], [10, 66, 96],
  [11, 67, 97], [11, 67, 97], [11, 67, 97], [11, 68, 98], [11, 68, 98],
  [11, 68, 98], [11, 69, 99], [12, 69, 99], [12, 69, 99], [12, 70, 100],
  [12, 70, 100], [12, 70, 100], [12, 71, 101], [12, 71, 101], [12, 71, 101],
  [13, 72, 102], [13, 72, 102], [13, 72, 102], [13, 73, 103], [13, 73, 103],
  [13, 73, 103], [13, 74, 104], [13, 74, 104], [14, 74, 104], [14, 75, 105],
  [14, 75, 105], [14, 75, 105], [14, 76, 106], [14, 76, 106], [14, 76, 106],
  [15, 77, 107], [15, 77, 107], [15, 77, 107], [15, 78, 108], [15, 78, 108],
  [15, 78, 108], [15, 79, 109], [15, 79, 109], [16, 79, 109], [16, 79, 109],
  [16, 80, 110], [16, 80, 110], [16, 80, 110], [16, 81, 111], [16, 81, 111],
  [16, 81, 111], [33, 90, 113], [53, 100, 116], [42, 102, 42], [43, 102, 41],
  [44, 102, 42], [45, 103, 42], [46, 103, 43], [47, 104, 43], [48, 104, 44],
  [50, 104, 44], [51, 105, 45], [52, 105, 46], [53, 106, 46], [54, 106, 47],
  [55, 106, 47], [56, 107, 48], [58, 107, 48], [59, 108, 49], [60, 108, 50],
  [61, 108, 50], [62, 109, 51], [63, 109, 51], [64, 110, 52], [66, 110, 52],
  [67, 110, 53], [68, 111, 54], [69, 111, 54], [70, 112, 55], [71, 112, 55],
  [72, 113, 56], [74, 113, 56], [75, 113, 57], [76, 114, 57], [77, 114, 58],
  [78, 115, 59], [79, 115, 59], [81, 115, 60], [82, 116, 60], [83, 116, 61],
  [84, 117, 61], [85, 117, 62], [86, 117, 63], [87, 118, 63], [89, 118, 64],
  [90, 119, 64], [91, 119, 65], [92, 119, 65], [93, 120, 66], [94, 120, 67],
  [95, 121, 67], [97, 121, 68], [98, 122, 68], [99, 122, 69], [100, 122, 69],
  [101, 123, 70], [102, 123, 70], [103, 124, 71], [105, 124, 72], [106, 124, 72],
  [107, 125, 73], [108, 125, 73], [109, 126, 74], [110, 126, 74], [111, 126, 75],
  [113, 127, 76], [114, 127, 76], [115, 128, 77], [117, 128, 77], [118, 129, 78],
  [120, 129, 78], [121, 130, 79], [122, 131, 80], [124, 131, 80], [125, 132, 81],
  [127, 132, 81], [128, 133, 82], [130, 134, 83], [131, 134, 83], [133, 135, 84],
  [134, 135, 84], [136, 136, 85], [137, 137, 86], [139, 137, 86], [140, 138, 87],
  [142, 138, 87], [143, 139, 88], [145, 139, 88], [146, 140, 89], [148, 141, 90],
  [149, 141, 90], [151, 142, 91], [152, 142, 91], [153, 144, 94], [154, 145, 98],
  [155, 146, 101], [156, 148, 105], [157, 149, 108], [158, 151, 111], [159, 152, 115],
  [160, 154, 118], [161, 155, 122], [162, 156, 125], [164, 158, 128], [165, 159, 132],
  [166, 161, 135], [167, 162, 139], [168, 163, 142], [169, 165, 145], [170, 166, 149],
  [171, 168, 152], [172, 169, 156], [173, 170, 159], [174, 172, 162], [175, 173, 166],
  [176, 175, 169], [177, 176, 173], [178, 177, 176], [180, 180, 180], [186, 186, 186],
  [192, 192, 192], [198, 198, 198], [204, 204, 204], [210, 210, 210], [216, 216, 216],
  [222, 222, 222], [228, 228, 228], [234, 234, 234], [240, 240, 240], [246, 246, 246],
  [255, 255, 255],
];

/**
 * Convertit une valeur de hauteur (0-255) en couleur RGB
 * @param {number} heightValue - La valeur de hauteur (0-255)
 * @returns {[number, number, number]} Tuple RGB [r, g, b]
 */
export function getColorFromHeight(heightValue) {
  const index = Math.max(0, Math.min(255, Math.floor(heightValue)));
  return COLOR_PALETTE[index];
}

/**
 * Convertit un tuple RGB en chaîne CSS
 * @param {[number, number, number]} rgb - Tuple RGB [r, g, b]
 * @returns {string} Chaîne CSS rgb(r, g, b)
 */
export function rgbToString(rgb) {
  return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;
}

/**
 * Obtient la couleur CSS pour une hauteur donnée
 * @param {number} heightValue - La valeur de hauteur (0-255)
 * @returns {string} Chaîne CSS rgb(r, g, b)
 */
export function getColorStringFromHeight(heightValue) {
  const rgb = getColorFromHeight(heightValue);
  return rgbToString(rgb);
}

/**
 * Obtient la couleur du climat basée sur la valeur (0-255)
 * 0-85: Bleu polaire
 * 85-127: Cyan tempéré froid
 * 127-170: Vert tempéré chaud
 * 170-210: Orange tropical
 * 210-255: Rouge désertique
 * @param {number} climateValue - La valeur de climat (0-255)
 * @returns {Array} [r, g, b]
 */
export function getColorFromClimate(climateValue) {
  if (climateValue < 85) {
    // Bleu polaire
    return [100, 150, 255];
  } else if (climateValue < 127) {
    // Cyan tempéré froid
    return [100, 200, 255];
  } else if (climateValue < 170) {
    // Vert tempéré chaud
    return [100, 255, 100];
  } else if (climateValue < 210) {
    // Orange tropical
    return [255, 150, 100];
  } else {
    // Rouge désertique
    return [255, 100, 100];
  }
}

/**
 * Obtient la couleur CSS pour un climat donné
 * @param {number} climateValue - La valeur de climat (0-255)
 * @returns {string} Chaîne CSS rgb(r, g, b)
 */
export function getColorStringFromClimate(climateValue) {
  const rgb = getColorFromClimate(climateValue);
  return rgbToString(rgb);
}
